webpackJsonp([5],{140:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.edit_cate=t.new_cate=t.tagslist=t.catelist=t.uploadCallback=t.update=t.up=t.down=t.remove=t.create=t.query=void 0;var n=a(41),u=r(n),c=a(141),s=r(c),i=(t.query=function(){var e=(0,s["default"])(u["default"].mark(function t(e){return u["default"].wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,d.get)("/api/article/lists",{data:e}));case 1:case"end":return t.stop()}},t,this)}));return function(t){return e.apply(this,arguments)}}(),t.create=function(){var e=(0,s["default"])(u["default"].mark(function t(e){return u["default"].wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,d.post)("/api/article/create",{data:e}));case 1:case"end":return t.stop()}},t,this)}));return function(t){return e.apply(this,arguments)}}(),t.remove=function(){var e=(0,s["default"])(u["default"].mark(function t(e){return u["default"].wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,d.post)("/api/article/del",{data:e}));case 1:case"end":return t.stop()}},t,this)}));return function(t){return e.apply(this,arguments)}}(),t.down=function(){var e=(0,s["default"])(u["default"].mark(function t(e){return u["default"].wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,d.post)("/api/article/down",{data:e}));case 1:case"end":return t.stop()}},t,this)}));return function(t){return e.apply(this,arguments)}}(),t.up=function(){var e=(0,s["default"])(u["default"].mark(function t(e){return u["default"].wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,d.post)("/api/article/up",{data:e}));case 1:case"end":return t.stop()}},t,this)}));return function(t){return e.apply(this,arguments)}}(),t.update=function(){var e=(0,s["default"])(u["default"].mark(function t(e){return u["default"].wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,d.post)("/api/article/edit",{data:e}));case 1:case"end":return t.stop()}},t,this)}));return function(t){return e.apply(this,arguments)}}(),t.uploadCallback=function(){var e=(0,s["default"])(u["default"].mark(function t(e){var a;return u["default"].wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=new FormData,a.append("file",e),t.abrupt("return",l["default"].post(o.apiURL+"/api/article/upload",a).then(function(e){return{data:{link:o.imgURL+e.data.data.path}}}));case 3:case"end":return t.stop()}},t,this)}));return function(t){return e.apply(this,arguments)}}(),t.catelist=function(){var e=(0,s["default"])(u["default"].mark(function t(){return u["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.get)("/api/category/list"));case 1:case"end":return e.stop()}},t,this)}));return function(){return e.apply(this,arguments)}}(),t.tagslist=function(){var e=(0,s["default"])(u["default"].mark(function t(){return u["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.get)("/api/tags/list"));case 1:case"end":return e.stop()}},t,this)}));return function(){return e.apply(this,arguments)}}(),t.new_cate=function(){var e=(0,s["default"])(u["default"].mark(function t(e){return u["default"].wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,d.post)("/api/category/new",{data:e}));case 1:case"end":return t.stop()}},t,this)}));return function(t){return e.apply(this,arguments)}}(),t.edit_cate=function(){var e=(0,s["default"])(u["default"].mark(function t(e){return u["default"].wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,d.post)("/api/category/edit",{data:e}));case 1:case"end":return t.stop()}},t,this)}));return function(t){return e.apply(this,arguments)}}(),a(180)),l=r(i),o=a(174),d=a(33)},173:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(4),u=r(n),c=(a(126),a(125)),s=r(c),i=a(41),l=r(i),o=a(140);a(112);t["default"]={namespace:"articles",state:{list:[],currentItem:{},modalVisible:!1,modalType:"create",cateModalType:"new",isView:!1,cateList:[],tagsList:[],pagination:{showSizeChanger:!0,showQuickJumper:!0,showTotal:function(e){return"\u5171 "+e+" \u6761"},current:1,total:null,pageSize:null}},subscriptions:{setup:function(e){var t=e.dispatch,a=e.history;return a.listen(function(e){"/articles/list"===e.pathname||"/articles"===e.pathname?(t({type:"query",payload:e.query}),t({type:"cateList"}),t({type:"tagsList"})):"/articles/category"===e.pathname?t({type:"cateList"}):"/articles/tag"===e.pathname&&t({type:"tagsList"})})}},effects:{query:l["default"].mark(function d(e,t){var a,r,n=e.payload,u=t.call,c=t.put;return l["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(o.query,n);case 2:if(a=e.sent,r=a.data,!r){e.next=7;break}return e.next=7,c({type:"updateState",payload:{list:r.data,pagination:{total:parseInt(r.pagination.total,10),current:parseInt(r.pagination.current,10)||1,pageSize:parseInt(n.pageSize,10)||10}}});case 7:case"end":return e.stop()}},d,this)}),reload:l["default"].mark(function f(e,t){var a,r=(e.action,t.put),n=t.select;return l["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(function(e){return e.articles.pagination.current});case 2:return a=e.sent,e.next=5,r({type:"query",payload:{page:a}});case 5:case"end":return e.stop()}},f,this)}),create:l["default"].mark(function p(e,t){var a,r,n=e.payload,u=t.call,c=t.put;return l["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c({type:"hideModal"});case 2:return e.next=4,u(o.create,n);case 4:if(a=e.sent,r=a.data,!r.success){e.next=10;break}return s["default"].success("save success",1),e.next=10,c({type:"reload"});case 10:case"end":return e.stop()}},p,this)}),update:l["default"].mark(function y(e,t){var a,r,n,c=e.payload,i=t.select,d=t.call,f=t.put;return l["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f({type:"hideModal"});case 2:return e.next=4,i(function(e){var t=e.articles;return t.currentItem._id});case 4:return a=e.sent,r=(0,u["default"])({},c,{id:a}),e.next=8,d(o.update,r);case 8:if(n=e.sent,!n.data.success){e.next=13;break}return s["default"].success("update success",1),e.next=13,f({type:"reload"});case 13:case"end":return e.stop()}},y,this)}),remove:l["default"].mark(function h(e,t){var a,r=e.payload,n=t.call,u=t.put;return l["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(o.remove,{id:r});case 2:if(a=e.sent,!a.data.success){e.next=6;break}return e.next=6,u({type:"reload"});case 6:case"end":return e.stop()}},h,this)}),down:l["default"].mark(function v(e,t){var a,r=e.payload,n=t.call,u=t.put;return l["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(o.down,{id:r});case 2:if(a=e.sent,!a.data.success){e.next=6;break}return e.next=6,u({type:"reload"});case 6:case"end":return e.stop()}},v,this)}),up:l["default"].mark(function m(e,t){var a,r=e.payload,n=t.call,u=t.put;return l["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(o.up,{id:r});case 2:if(a=e.sent,!a.data.success){e.next=6;break}return e.next=6,u({type:"reload"});case 6:case"end":return e.stop()}},m,this)}),tagsList:l["default"].mark(function w(e,t){var a,r=(e.payload,t.call),n=t.put;return l["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(o.tagslist);case 2:return a=e.sent,e.next=5,n({type:"tags",payload:{tagsList:a.data.tagslist}});case 5:case"end":return e.stop()}},w,this)}),cateList:l["default"].mark(function x(e,t){var a,r=(e.payload,t.call),n=t.put;return l["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(o.catelist);case 2:return a=e.sent,e.next=5,n({type:"cate",payload:{cateList:a.data.catelist}});case 5:case"end":return e.stop()}},x,this)}),new_cate:l["default"].mark(function g(e,t){var a,r,n=e.payload,u=t.call,c=t.put;return l["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c({type:"hideModal"});case 2:return e.next=4,u(o.new_cate,n);case 4:if(a=e.sent,r=a.data,!r.success){e.next=12;break}return s["default"].success(r.message,1),e.next=10,c({type:"cateList"});case 10:e.next=13;break;case 12:s["default"].error(r.message);case 13:case"end":return e.stop()}},g,this)}),edit_cate:l["default"].mark(function b(e,t){var a,r,n,c=e.payload,i=t.select,d=t.call,f=t.put;return l["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f({type:"hideModal"});case 2:return e.next=4,i(function(e){var t=e.articles;return t.currentItem._id});case 4:return a=e.sent,r=(0,u["default"])({},c,{id:a}),e.next=8,d(o.edit_cate,r);case 8:if(n=e.sent,!n.data.success){e.next=13;break}return s["default"].success(n.data.message,1),e.next=13,f({type:"cateList"});case 13:case"end":return e.stop()}},b,this)})},reducers:{updateState:function(e,t){var a=t.payload,r=a.list,n=a.pagination;return(0,u["default"])({},e,{list:r,pagination:(0,u["default"])({},e.pagination,n)})},showModal:function(e,t){return(0,u["default"])({},e,t.payload,{modalVisible:!0})},hideModal:function(e){return(0,u["default"])({},e,{modalVisible:!1})},cate:function(e,t){var a=t.payload.cateList;return(0,u["default"])({},e,{cateList:a})},tags:function(e,t){var a=t.payload.tagsList;return(0,u["default"])({},e,{tagsList:a})}}},e.exports=t["default"]},1273:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e){var t=e.location,a=e.dispatch,r=e.articles,n=e.loading,u=r.currentItem,s=r.modalVisible,i=r.cateModalType,l=r.cateList,o={data:l,location:t,loading:n,onEditItem:function(e){a({type:"articles/showModal",payload:{cateModalType:"edit",currentItem:e}})},onAdd:function(){a({type:"articles/showModal",payload:{cateModalType:"new"}})}},f={item:"new"===i?{}:u,type:i,visible:s,onOk:function(e){a({type:"articles/"+(i+"_cate"),payload:e})},onCancel:function(){a({type:"articles/hideModal"})}};return c["default"].createElement("div",null,c["default"].createElement(d["default"],o),c["default"].createElement(p["default"],f))}Object.defineProperty(t,"__esModule",{value:!0});var u=a(1),c=r(u),s=a(3),i=r(s),l=a(91),o=a(1274),d=r(o),f=a(1275),p=r(f);n.PropTypes={articles:i["default"].object,location:i["default"].object,dispatch:i["default"].func,loading:i["default"].bool},t["default"]=(0,l.connect)(function(e){var t=e.articles,a=e.loading;return{articles:t,loading:a.models.articles}})(n),e.exports=t["default"]},1274:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e){var t=e.data,a=e.onEditItem,r=e.onAdd,n=t.map(function(e){return i["default"].createElement(c["default"],{key:e._id,onClick:function(){return a(e)},type:"primary",style:{padding:5,margin:5}},e.name)}),u={width:500,background:"rgb(187, 234, 234)",padding:20,borderRadius:6};return i["default"].createElement("div",{style:u},n,i["default"].createElement(c["default"],{type:"dashed",ghost:!0,onClick:function(){return r()},icon:"plus"}))}Object.defineProperty(t,"__esModule",{value:!0});var u=(a(71),a(64)),c=r(u),s=a(1),i=r(s),l=a(3),o=r(l);n.propTypes={data:o["default"].array,onEditItem:o["default"].func,onAdd:o["default"].func},t["default"]=n,e.exports=t["default"]},1275:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=(a(197),a(196)),u=r(n),c=(a(124),a(194)),s=r(c),i=a(4),l=r(i),o=(a(192),a(191)),d=r(o),f=a(1),p=r(f),y=a(3),h=r(y),v=d["default"].Item,m=function(e){var t=e.visible,a=e.type,r=e.item,n=void 0===r?{}:r,c=e.onOk,i=e.onCancel,o=e.form,f=o.getFieldDecorator,y=o.validateFields,h=o.getFieldsValue,m=function(){y(function(e){if(!e){var t=(0,l["default"])({},h(),{key:n.key});c(t)}})},w={width:280,title:""+(a+" category"),visible:t,onOk:m,onCancel:i,wrapClassName:"vertical-center-modal"};return p["default"].createElement(u["default"],w,p["default"].createElement(d["default"],{layout:"horizontal"},p["default"].createElement(v,{label:"Name",hasFeedback:!0},f("name",{initialValue:n.name||"",rules:[{required:!0,message:"Name is required!"}]})(p["default"].createElement(s["default"],{placeholder:"Enter a Name"})))))};m.propTypes={form:h["default"].object.isRequired,visible:h["default"].bool,type:h["default"].string,item:h["default"].object,onCancel:h["default"].func,onOk:h["default"].func},t["default"]=d["default"].create()(m),e.exports=t["default"]}});